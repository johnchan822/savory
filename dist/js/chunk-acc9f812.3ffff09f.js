(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-acc9f812"],{"0c78":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l={class:"container"},n={class:"table"},r=Object(a["h"])("thead",null,[Object(a["h"])("tr",null,[Object(a["h"])("th",{scope:"col"},"購買時間"),Object(a["h"])("th",{scope:"col"},"Email"),Object(a["h"])("th",{scope:"col"},"購買款項"),Object(a["h"])("th",{scope:"col"},"應付金額"),Object(a["h"])("th",{scope:"col"},"是否付款"),Object(a["h"])("th",{scope:"col"},"編輯")])],-1),o={class:"custom-control custom-switch"},d={key:0},i={key:1};function b(e,t,c,b,s,O){var u=Object(a["C"])("Loading"),h=Object(a["C"])("del-modal"),j=Object(a["C"])("order-modal"),p=Object(a["C"])("pagination");return Object(a["v"])(),Object(a["e"])(a["a"],null,[Object(a["h"])(u,{active:s.isLoading},null,8,["active"]),Object(a["h"])("div",l,[Object(a["h"])("table",n,[r,Object(a["h"])("tbody",null,[(Object(a["v"])(!0),Object(a["e"])(a["a"],null,Object(a["A"])(s.orders,(function(t,c){return Object(a["v"])(),Object(a["e"])("tr",{key:s.orders+c,class:{"text-secondary":!t.is_paid}},[Object(a["h"])("td",null,Object(a["F"])(e.$filters.date(t.create_at)),1),Object(a["h"])("td",null,Object(a["F"])(t.user.email),1),Object(a["h"])("td",null,[(Object(a["v"])(!0),Object(a["e"])(a["a"],null,Object(a["A"])(t.products,(function(e,t){return Object(a["v"])(),Object(a["e"])("div",{key:e+t},Object(a["F"])(e.product.title)+" x "+Object(a["F"])(e.qty),1)})),128))]),Object(a["h"])("td",null,Object(a["F"])(Math.round(t.total)),1),Object(a["h"])("td",null,[Object(a["h"])("span",o,[Object(a["O"])(Object(a["h"])("input",{type:"checkbox",class:"custom-control-input",id:t+c,"onUpdate:modelValue":function(e){return t.is_paid=e},checked:""},null,8,["id","onUpdate:modelValue"]),[[a["I"],t.is_paid]]),Object(a["h"])("label",{class:"custom-control-label",for:t+c},null,8,["for"]),t.is_paid?(Object(a["v"])(),Object(a["e"])("span",d,"已付款")):(Object(a["v"])(),Object(a["e"])("span",i,"未付款"))])]),Object(a["h"])("td",null,[Object(a["h"])("button",{type:"button",class:"btn btn-outline-primary mr-1",onClick:function(e){return O.openModal(t)}},"檢視",8,["onClick"]),Object(a["h"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(e){return O.openDelModal(t)}},"刪除",8,["onClick"])])],2)})),128))])])]),Object(a["h"])(h,{ref:"delModal",tempProduct:s.order,onEmitDelProduct:O.delOrderData},null,8,["tempProduct","onEmitDelProduct"]),Object(a["h"])(j,{ref:"orderModal",order:s.order,onEmitPaid:O.updateOrderData},null,8,["order","onEmitPaid"]),Object(a["h"])(p,{page:s.pagination,onEmitPage:O.getOrderData},null,8,["page","onEmitPage"])],64)}var s=c("5530"),O=(c("99af"),c("b0c0"),{class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"}),u={class:"modal-dialog modal-xl",role:"document"},h={class:"modal-content border-0"},j=Object(a["h"])("div",{class:"modal-header bg-dark text-white"},[Object(a["h"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(a["h"])("span",null,"訂單細節")]),Object(a["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),p={class:"modal-body"},m={class:"row"},f={class:"col-md-4"},v=Object(a["h"])("h3",null,"用戶資料",-1),g={class:"table"},y={key:0},k=Object(a["h"])("th",{style:{width:"100px"}},"姓名",-1),x=Object(a["h"])("th",null,"Email",-1),M=Object(a["h"])("th",null,"電話",-1),_=Object(a["h"])("th",null,"地址",-1),F={class:"col-md-8"},$=Object(a["h"])("h3",null,"訂單細節",-1),C={class:"table"},D=Object(a["h"])("th",{style:{width:"100px"}},"訂單編號",-1),P=Object(a["h"])("th",null,"下單時間",-1),w=Object(a["h"])("th",null,"付款時間",-1),E={key:0},L={key:1},A=Object(a["h"])("th",null,"付款狀態",-1),S={key:0,class:"text-success"},U={key:1,class:"text-muted"},V=Object(a["h"])("th",null,"總金額",-1),q=Object(a["h"])("h3",null,"選購商品",-1),I={class:"table"},J=Object(a["h"])("thead",null,[Object(a["h"])("tr")],-1),N={class:"text-end"},z={class:"d-flex justify-content-end"},B={class:"form-check"},G={class:"form-check-label",for:"flexCheckDefault"},H={key:0},K={key:1},Q={class:"modal-footer"},R=Object(a["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function T(e,t,c,l,n,r){return Object(a["v"])(),Object(a["e"])("div",O,[Object(a["h"])("div",u,[Object(a["h"])("div",h,[j,Object(a["h"])("div",p,[Object(a["h"])("div",m,[Object(a["h"])("div",f,[v,Object(a["h"])("table",g,[n.tempOrder.user?(Object(a["v"])(),Object(a["e"])("tbody",y,[Object(a["h"])("tr",null,[k,Object(a["h"])("td",null,Object(a["F"])(n.tempOrder.user.name),1)]),Object(a["h"])("tr",null,[x,Object(a["h"])("td",null,Object(a["F"])(n.tempOrder.user.email),1)]),Object(a["h"])("tr",null,[M,Object(a["h"])("td",null,Object(a["F"])(n.tempOrder.user.tel),1)]),Object(a["h"])("tr",null,[_,Object(a["h"])("td",null,Object(a["F"])(n.tempOrder.user.address),1)])])):Object(a["f"])("",!0)])]),Object(a["h"])("div",F,[$,Object(a["h"])("table",C,[Object(a["h"])("tbody",null,[Object(a["h"])("tr",null,[D,Object(a["h"])("td",null,Object(a["F"])(n.tempOrder.id),1)]),Object(a["h"])("tr",null,[P,Object(a["h"])("td",null,Object(a["F"])(e.$filters.date(n.tempOrder.create_at)),1)]),Object(a["h"])("tr",null,[w,Object(a["h"])("td",null,[n.tempOrder.paid_date?(Object(a["v"])(),Object(a["e"])("span",E,Object(a["F"])(e.$filters.date(n.tempOrder.paid_date)),1)):(Object(a["v"])(),Object(a["e"])("span",L,"時間不正確"))])]),Object(a["h"])("tr",null,[A,Object(a["h"])("td",null,[n.tempOrder.is_paid?(Object(a["v"])(),Object(a["e"])("strong",S,"已付款")):(Object(a["v"])(),Object(a["e"])("span",U,"尚未付款"))])]),Object(a["h"])("tr",null,[V,Object(a["h"])("td",null,Object(a["F"])(e.$filters.currency(n.tempOrder.total)),1)])])]),q,Object(a["h"])("table",I,[J,Object(a["h"])("tbody",null,[(Object(a["v"])(!0),Object(a["e"])(a["a"],null,Object(a["A"])(n.tempOrder.products,(function(t){return Object(a["v"])(),Object(a["e"])("tr",{key:t.id},[Object(a["h"])("th",null,Object(a["F"])(t.product.title),1),Object(a["h"])("td",null,Object(a["F"])(t.qty)+" / "+Object(a["F"])(t.product.unit),1),Object(a["h"])("td",N,Object(a["F"])(e.$filters.currency(t.final_total)),1)])})),128))])]),Object(a["h"])("div",z,[Object(a["h"])("div",B,[Object(a["O"])(Object(a["h"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":t[1]||(t[1]=function(e){return n.tempOrder.is_paid=e})},null,512),[[a["I"],n.tempOrder.is_paid]]),Object(a["h"])("label",G,[n.tempOrder.is_paid?(Object(a["v"])(),Object(a["e"])("span",H,"已付款")):(Object(a["v"])(),Object(a["e"])("span",K,"未付款"))])])])])])]),Object(a["h"])("div",Q,[R,Object(a["h"])("button",{type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=function(t){return e.$emit("emit-paid",n.tempOrder)})}," 修改付款狀態 ")])])])],512)}var W=c("e0ae"),X={props:["order"],data:function(){return{modal:" ",tempOrder:{}}},watch:{order:function(){this.tempOrder=this.order}},mixins:[W["a"]]};c("8797");X.render=T;var Y=X,Z=c("0133"),ee=c("3996"),te={data:function(){return{orders:{},order:{},pagination:"",isLoading:!1}},components:{delModal:Z["a"],orderModal:Y,pagination:ee["a"]},methods:{getOrderData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0,this.$http.get("".concat("https://vue3-course-api.hexschool.io/","api/").concat("johnhexschool","/admin/orders?page=").concat(t)).then((function(t){e.orders=t.data.orders,e.pagination=t.data.pagination,e.isLoading=!1}))},delOrderData:function(e){var t=this;console.log(e);var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("johnhexschool","/admin/order/").concat(e.id);this.$http.delete(c).then((function(e){t.$httpMessageState(e,"訂單刪除"),t.getOrderData(),t.$refs.delModal.closeModal()}))},updateOrderData:function(e){var t=this;console.log(e.is_paid);var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("johnhexschool","/admin/order/").concat(e.id);this.$http.put(c,{data:e}).then((function(e){console.log(e),t.$refs.orderModal.closeModal(),t.$httpMessageState(e,"訂單修改"),t.getOrderData()}))},openDelModal:function(e){this.$refs.delModal.openModal(),this.order=Object(s["a"])({},e)},openModal:function(e){this.$refs.orderModal.openModal(),this.order=Object(s["a"])({},e)}},mounted:function(){this.getOrderData()}};te.render=b;t["default"]=te},"0e0b":function(e,t,c){},3996:function(e,t,c){"use strict";var a=c("7a23"),l={class:"container d-flex justify-content-center mt-5"},n={"aria-label":"Page navigation example"},r={class:"pagination"},o=Object(a["h"])("span",{"aria-hidden":"true"},"«",-1),d=Object(a["h"])("span",{"aria-hidden":"true"},"»",-1);function i(e,t,c,i,b,s){return Object(a["v"])(),Object(a["e"])("div",l,[Object(a["h"])("nav",n,[Object(a["h"])("ul",r,[Object(a["h"])("li",{class:["page-item",{disabled:!c.page.has_pre}]},[Object(a["h"])("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[1]||(t[1]=Object(a["P"])((function(t){return e.$emit("emit-page",c.page.current_page-1)}),["prevent"]))},[o])],2),(Object(a["v"])(!0),Object(a["e"])(a["a"],null,Object(a["A"])(c.page.total_pages,(function(t){return Object(a["v"])(),Object(a["e"])("li",{class:["page-item",{active:t===c.page.current_page}],key:t},[Object(a["h"])("a",{class:"page-link",href:"#",onClick:Object(a["P"])((function(c){return e.$emit("emit-page",t)}),["prevent"])},Object(a["F"])(t),9,["onClick"])],2)})),128)),Object(a["h"])("li",{class:["page-item",{disabled:!c.page.has_next}]},[Object(a["h"])("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[2]||(t[2]=Object(a["P"])((function(t){return e.$emit("emit-page",c.page.current_page+1)}),["prevent"]))},[d])],2)])])])}var b={props:["page"]};b.render=i;t["a"]=b},8797:function(e,t,c){"use strict";c("0e0b")},b0c0:function(e,t,c){var a=c("83ab"),l=c("9bf2").f,n=Function.prototype,r=n.toString,o=/^\s*function ([^ (]*)/,d="name";a&&!(d in n)&&l(n,d,{configurable:!0,get:function(){try{return r.call(this).match(o)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-acc9f812.3ffff09f.js.map