(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07690d27"],{"01ea":function(t,e,c){"use strict";c("dd0f")},5727:function(t,e,c){"use strict";c.r(e);c("9911"),c("b0c0");var l=c("7a23"),n={id:"cart"},a=Object(l["h"])("div",{class:"w1400"},[Object(l["h"])("h1",{class:"title"},"購物結帳")],-1),s={class:"inner w1200"},o={class:"step_bar"},r=Object(l["h"])("div",{class:"circle"},"1",-1),i=Object(l["g"])("購物車 "),u=Object(l["h"])("div",{class:"circle"},"2",-1),b=Object(l["g"])("填寫資料 "),d=Object(l["h"])("div",{class:"circle"},"3",-1),h=Object(l["g"])("完成訂單 "),O=Object(l["h"])("div",{class:"circle"},"4",-1),j=Object(l["g"])("付款成功 "),p={class:"table_overhiden"},m={class:"table"},f=Object(l["h"])("th",{width:"11%"},null,-1),v=Object(l["h"])("th",null,"品名",-1),y=Object(l["h"])("th",{width:"20%"},"數量",-1),g=Object(l["h"])("th",null,"單價",-1),k=Object(l["h"])("th",null,"小計",-1),_={width:"10%"},C=Object(l["g"])("清空購物車"),$=Object(l["h"])("span",null,null,-1),F={class:"counter"},x=Object(l["h"])("i",{class:"bi bi-dash-lg"},null,-1),w=Object(l["h"])("i",{class:"bi bi-plus-lg"},null,-1),I=Object(l["h"])("i",{class:"bi bi-x-lg "},null,-1),N=Object(l["h"])("td",null,null,-1),V=Object(l["h"])("td",null,null,-1),q=Object(l["h"])("td",null,null,-1),T=Object(l["h"])("td",null,"總金額",-1),A=Object(l["h"])("td",null,null,-1),L={class:"flex_right"},U=Object(l["g"])(" 下一步"),M=Object(l["h"])("span",null,null,-1),J={key:1,class:"please_buy"},S=Object(l["h"])("h4",null,"未選購商品",-1),B=Object(l["h"])("span",null,null,-1),D=Object(l["g"])("回到餐點頁選購"),P={class:"left_list"},E=Object(l["h"])("h6",{class:"title"},"訂單明細",-1),Q={class:"item_scorll"},G={class:"section"},W={class:"list_name"},X={class:"name"},z={class:"qty"},H={key:0,class:"coupcode_text"},Y=Object(l["g"])(" 消費金額已達NT$1,500元"),R=Object(l["h"])("br",null,null,-1),Z=Object(l["h"])("br",null,null,-1),K=Object(l["g"])(" 輸入夏季限時優惠碼 "),tt=Object(l["h"])("span",{style:{"font-weight":"bold"}},'"savory88"',-1),et=Object(l["g"])("即享 88 折 優惠！ "),ct={key:1,class:"coupcode_text"},lt=Object(l["g"])(" 消費金額滿NT$1,500 即可享 "),nt=Object(l["h"])("span",{style:{"font-weight":"bold"}},'"88折"',-1),at=Object(l["g"])("優惠"),st=Object(l["h"])("br",null,null,-1),ot=Object(l["h"])("br",null,null,-1),rt=Object(l["g"])(" 目前的消費金額尚差 "),it={style:{color:"red"}},ut=Object(l["g"])("！ "),bt=Object(l["g"])("繼續選購"),dt=Object(l["h"])("span",null,null,-1),ht={class:"couponcode"},Ot={class:"total_price"},jt=Object(l["h"])("div",null,"小計",-1),pt={key:2,class:" discount"},mt=Object(l["h"])("div",null,"折扣",-1),ft={class:"final_price"},vt=Object(l["h"])("div",null,"總金額",-1),yt={key:0},gt={key:1},kt=Object(l["h"])("h6",{class:"title"},"收件人資料",-1),_t={class:"form_block"},Ct=Object(l["h"])("label",{for:"name"},[Object(l["g"])("收件人姓名"),Object(l["h"])("span",{style:{color:"red"}},"*")],-1),$t={class:"form_block"},Ft=Object(l["h"])("label",{for:"email"},[Object(l["g"])("電子信箱"),Object(l["h"])("span",{style:{color:"red"}},"*")],-1),xt={class:"form_block"},wt=Object(l["h"])("label",{for:"phone"},[Object(l["g"])("收件人電話"),Object(l["h"])("span",{style:{color:"red"}},"*")],-1),It={class:"form_block"},Nt=Object(l["h"])("label",{for:"address"},[Object(l["g"])("收件人地址"),Object(l["h"])("span",{style:{color:"red"}},"*")],-1),Vt={class:"form_block"},qt=Object(l["h"])("label",{for:"pay"},[Object(l["g"])("付款方式"),Object(l["h"])("span",{style:{color:"red"}},"*")],-1),Tt=Object(l["h"])("option",{value:"",selected:"selected",disabled:"disabled"},"請選擇",-1),At=Object(l["h"])("option",{value:"信用卡"},"信用卡",-1),Lt=Object(l["h"])("option",{value:"ATM"},"ATM",-1),Ut=Object(l["h"])("option",{value:"WebATM"},"WebATM",-1),Mt=Object(l["h"])("option",{value:"ApplePay"},"ApplePay",-1),Jt={class:"form_block"},St=Object(l["h"])("label",{for:"message",class:"form-label"},"其他需求",-1),Bt={class:"btn_group"},Dt=Object(l["h"])("span",null,null,-1),Pt=Object(l["g"])("回上一頁 "),Et=Object(l["h"])("button",{class:"main_btn",type:"sumbit"},[Object(l["g"])("確認結帳"),Object(l["h"])("span")],-1),Qt={class:"table"},Gt=Object(l["h"])("thead",null,[Object(l["h"])("tr",null,[Object(l["h"])("th"),Object(l["h"])("th",null,"品名"),Object(l["h"])("th",null,"數量"),Object(l["h"])("th",null,"單價")])],-1),Wt=Object(l["h"])("td",null,null,-1),Xt=Object(l["h"])("td",null,null,-1),zt=Object(l["h"])("td",null,"總計",-1),Ht={class:"order_table"},Yt=Object(l["h"])("th",null,"Email",-1),Rt=Object(l["h"])("th",null,"姓名",-1),Zt=Object(l["h"])("th",null,"收件人電話",-1),Kt=Object(l["h"])("th",null,"收件人地址",-1),te=Object(l["h"])("th",null,"其他需求",-1),ee=Object(l["h"])("th",null,"收件人付款方式",-1),ce=Object(l["h"])("h5",null,"付款成功，感謝你的訂購!",-1),le=Object(l["g"])("繼續選購 "),ne=Object(l["h"])("span",null,null,-1);function ae(t,e,c,ae,se,oe){var re=Object(l["C"])("Loading"),ie=Object(l["C"])("router-link"),ue=Object(l["C"])("Field"),be=Object(l["C"])("error-message"),de=Object(l["C"])("Form");return Object(l["v"])(),Object(l["e"])("section",n,[Object(l["h"])(re,{active:oe.isLoading},null,8,["active"]),Object(l["h"])("div",{class:"section_banner",style:{backgroundImage:"url(https://storage.googleapis.com/vue-course-api.appspot.com/johnhexschool/1626626504477.jpg?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=nXJ1i2gnG81cFuIxkiao33TFUNPo0cWP8AdopAdRAm0nEFEpBi7QCxINmOq77%2BP9ml0%2FprN6sbHsSc3u1a3B2ry6IbddVpnotiIdVTHRwUlEheMue2krC%2FYIxtHEoGPvT0QAtLFMmwe7LiFZ2YtxejD%2Bbhuqw5yVbo5C3QVBPzJ2rfvuOvqnQriQhL%2BcJy4JQE0XllC1f4NGy4W7Os%2F56X65Sz5GKDh35aYcrp%2Fpg8nMjikbICyospx4Qy93dvWJlvFXVn2ZYWh9bZdMq6SDf3p1sxxzDrNktxf9I4XswMvAGIBC5hlzRgDLDgbWbno17vJJXHd1CHkHBglQleGPAg%3D%3D)"}},[a],4),Object(l["h"])("div",s,[Object(l["h"])("div",o,[Object(l["h"])("h6",{class:["step",{active:"first"===se.link}]},[r,i],2),Object(l["h"])("h6",{class:["step",{active:"second"===se.link}]},[u,b],2),Object(l["h"])("h6",{class:["step",{active:"third"===se.link}]},[d,h],2),Object(l["h"])("h6",{class:["step",{active:"four"===se.link}]},[O,j],2)]),Object(l["h"])("div",{class:["cart_step_first",{active:"first"===se.link}]},[""!=oe.carts.carts?(Object(l["v"])(),Object(l["e"])(l["a"],{key:0},[Object(l["h"])("div",p,[Object(l["h"])("table",m,[Object(l["h"])("thead",null,[Object(l["h"])("tr",null,[f,v,y,g,k,Object(l["h"])("th",_,[Object(l["h"])("button",{class:"main_btn",type:"button",onClick:e[1]||(e[1]=function(){return oe.delAllCartData&&oe.delAllCartData.apply(oe,arguments)})},[C,$])])])]),Object(l["h"])("tbody",null,[oe.carts.carts?(Object(l["v"])(!0),Object(l["e"])(l["a"],{key:0},Object(l["A"])(oe.carts.carts,(function(e,c){return Object(l["v"])(),Object(l["e"])("tr",{key:e+c},[Object(l["h"])("td",null,[Object(l["h"])("div",{class:"img",style:{backgroundImage:"url(".concat(e.product.imageUrl,")")}},null,4)]),Object(l["h"])("td",null,Object(l["F"])(e.product.title),1),Object(l["h"])("td",null,[Object(l["h"])("div",F,[Object(l["h"])("button",{class:"less",onClick:function(t){return oe.upateCartItem(e,"less")}},[x],8,["onClick"]),Object(l["O"])(Object(l["h"])("input",{type:"number",min:"1",readonly:"readonly","onUpdate:modelValue":function(t){return e.qty=t}},null,8,["onUpdate:modelValue"]),[[l["J"],e.qty,void 0,{number:!0}]]),Object(l["h"])("button",{type:"button",class:"add",onClick:function(t){return oe.upateCartItem(e,"add")}},[w],8,["onClick"])])]),Object(l["h"])("td",null,[Object(l["h"])("div",null,"NT$"+Object(l["F"])(t.$filters.currency(e.product.price)),1)]),Object(l["h"])("td",null,[Object(l["h"])("div",null,"NT$"+Object(l["F"])(t.$filters.currency(e.qty*e.product.price)),1)]),Object(l["h"])("td",null,[Object(l["h"])("button",{type:"button",class:"btn  x-btn",onClick:function(t){return oe.delCartItem(e)}},[I],8,["onClick"])])])})),128)):Object(l["f"])("",!0)]),Object(l["h"])("tfoot",null,[Object(l["h"])("tr",null,[N,V,q,T,Object(l["h"])("td",null,[Object(l["h"])("h6",null,"NT$"+Object(l["F"])(t.$filters.currency(oe.carts.total)),1)]),A])])])]),Object(l["h"])("div",L,[Object(l["h"])("button",{class:"main_btn next_btn",type:"button",onClick:e[2]||(e[2]=function(t){return se.link="second"})},[U,M])])],64)):(Object(l["v"])(),Object(l["e"])("div",J,[S,Object(l["h"])(ie,{class:"main_btn",to:"/products/全部"},{default:Object(l["N"])((function(){return[B,D]})),_:1})]))],2),Object(l["h"])("div",{class:["cart_step_second",{active:"second"===se.link}]},[Object(l["h"])("div",P,[E,Object(l["h"])("div",Q,[(Object(l["v"])(!0),Object(l["e"])(l["a"],null,Object(l["A"])(oe.carts.carts,(function(e,c){return Object(l["v"])(),Object(l["e"])("div",{class:"item",key:e+c},[Object(l["h"])("div",G,[Object(l["h"])("div",{class:"img",style:{backgroundImage:"url(".concat(e.product.imageUrl,")")}},null,4),Object(l["h"])("div",W,[Object(l["h"])("p",X,Object(l["F"])(e.product.title),1),Object(l["h"])("p",null,"NT$"+Object(l["F"])(t.$filters.currency(e.product.price)),1)])]),Object(l["h"])("div",z,"X "+Object(l["F"])(e.qty),1)])})),128))]),oe.carts.total>=1500?(Object(l["v"])(),Object(l["e"])("h6",H,[Y,R,Z,K,tt,et])):(Object(l["v"])(),Object(l["e"])("h6",ct,[lt,nt,at,st,ot,rt,Object(l["h"])("span",it,"NT$"+Object(l["F"])(t.$filters.currency(1500-oe.carts.total)),1),ut,Object(l["h"])(ie,{class:"main_btn",to:"/products/全部"},{default:Object(l["N"])((function(){return[bt,dt]})),_:1})])),Object(l["h"])("div",ht,[Object(l["O"])(Object(l["h"])("input",{type:"text",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=function(t){return se.coupon_code=t}),placeholder:"請輸入優惠碼"},null,512),[[l["J"],se.coupon_code]]),Object(l["h"])("button",{class:"coupon_btn",type:"button",onClick:e[4]||(e[4]=function(){return oe.addCouponCode&&oe.addCouponCode.apply(oe,arguments)})}," 套用 ")]),Object(l["h"])("div",Ot,[jt,Object(l["h"])("div",null,"NT$"+Object(l["F"])(t.$filters.currency(oe.carts.total)),1)]),se.coupon.final_total&&"savory88"==se.coupon_code?(Object(l["v"])(),Object(l["e"])("div",pt,[mt,Object(l["h"])("div",null,"NT$ -"+Object(l["F"])(oe.carts.total-Math.round(se.coupon.final_total)),1)])):Object(l["f"])("",!0),Object(l["h"])("h5",ft,[vt,se.coupon.final_total&&"savory88"==se.coupon_code?(Object(l["v"])(),Object(l["e"])("div",yt," NT$"+Object(l["F"])(t.$filters.currency(Math.round(se.coupon.final_total))),1)):(Object(l["v"])(),Object(l["e"])("div",gt,"NT$"+Object(l["F"])(t.$filters.currency(Math.round(oe.carts.total))),1))])]),Object(l["h"])(de,{onSubmit:oe.onSubmit,ref:"form",class:"form"},{default:Object(l["N"])((function(t){var c=t.errors;return[kt,Object(l["h"])("div",_t,[Ct,Object(l["h"])(ue,{id:"name",name:"姓名",type:"text",class:["form-control",{"is-invalid":c["姓名"]}],placeholder:"請輸入 姓名",rules:"required",modelValue:se.user.name,"onUpdate:modelValue":e[5]||(e[5]=function(t){return se.user.name=t})},null,8,["class","modelValue"]),Object(l["h"])(be,{name:"姓名",class:"invalid-feedback"})]),Object(l["h"])("div",$t,[Ft,Object(l["h"])(ue,{id:"email",name:"email",type:"email",class:["form-control",{"is-invalid":c["email"]}],placeholder:"請輸入 Email",rules:"email|required",modelValue:se.user.email,"onUpdate:modelValue":e[6]||(e[6]=function(t){return se.user.email=t})},null,8,["class","modelValue"]),Object(l["h"])(be,{name:"email",class:"invalid-feedback"})]),Object(l["h"])("div",xt,[wt,Object(l["h"])(ue,{id:"phone",name:"電話",type:"tel",class:["form-control",{"is-invalid":c["電話"]}],placeholder:"請輸入 電話",rules:"required|min:8",modelValue:se.user.phone,"onUpdate:modelValue":e[7]||(e[7]=function(t){return se.user.phone=t})},null,8,["class","modelValue"]),Object(l["h"])(be,{name:"電話",class:"invalid-feedback"})]),Object(l["h"])("div",It,[Nt,Object(l["h"])(ue,{id:"address",name:"地址",type:"text",class:["form-control",{"is-invalid":c["地址"]}],placeholder:"請輸入 地址",rules:"required",modelValue:se.user.address,"onUpdate:modelValue":e[8]||(e[8]=function(t){return se.user.address=t})},null,8,["class","modelValue"]),Object(l["h"])(be,{name:"地址",class:"invalid-feedback"})]),Object(l["h"])("div",Vt,[qt,Object(l["h"])(ue,{id:"pay",name:"付款",as:"select",class:["form-control",{"is-invalid":c["付款"]}],rules:"required",modelValue:se.user.payment_method,"onUpdate:modelValue":e[9]||(e[9]=function(t){return se.user.payment_method=t})},{default:Object(l["N"])((function(){return[Tt,At,Lt,Ut,Mt]})),_:2},1032,["class","modelValue"]),Object(l["h"])(be,{name:"付款",class:"invalid-feedback"})]),Object(l["h"])("div",Jt,[St,Object(l["O"])(Object(l["h"])("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":e[10]||(e[10]=function(t){return se.user.message=t})},null,512),[[l["J"],se.user.message]])]),Object(l["h"])("div",Bt,[Object(l["h"])("div",{class:"back_btn",onClick:e[11]||(e[11]=function(t){return se.link="first"})},[Dt,Pt]),Et])]})),_:1},8,["onSubmit"])],2),Object(l["h"])("div",{class:["cart_setp_third",{active:"third"===se.link}]},[Object(l["h"])("form",{onSubmit:e[13]||(e[13]=Object(l["P"])((function(){return oe.payOrder&&oe.payOrder.apply(oe,arguments)}),["prevent"]))},[Object(l["h"])("table",Qt,[Gt,Object(l["h"])("tbody",null,[(Object(l["v"])(!0),Object(l["e"])(l["a"],null,Object(l["A"])(se.order.products,(function(e){return Object(l["v"])(),Object(l["e"])("tr",{key:e.id},[Object(l["h"])("td",null,[Object(l["h"])("div",{class:"img",style:{backgroundImage:"url(".concat(e.product.imageUrl,")")}},null,4)]),Object(l["h"])("td",null,Object(l["F"])(e.product.title),1),Object(l["h"])("td",null,Object(l["F"])(e.qty),1),Object(l["h"])("td",null,"NT$"+Object(l["F"])(t.$filters.currency(e.final_total)),1)])})),128))]),Object(l["h"])("tfoot",null,[Object(l["h"])("tr",null,[Wt,Xt,zt,Object(l["h"])("td",null,"NT$"+Object(l["F"])(t.$filters.currency(Math.round(se.order.total))),1)])])]),Object(l["h"])("table",Ht,[Object(l["h"])("tbody",null,[Object(l["h"])("tr",null,[Yt,Object(l["h"])("td",null,Object(l["F"])(se.order.user.email),1)]),Object(l["h"])("tr",null,[Rt,Object(l["h"])("td",null,Object(l["F"])(se.order.user.name),1)]),Object(l["h"])("tr",null,[Zt,Object(l["h"])("td",null,Object(l["F"])(se.order.user.tel),1)]),Object(l["h"])("tr",null,[Kt,Object(l["h"])("td",null,Object(l["F"])(se.order.user.address),1)]),Object(l["h"])("tr",null,[te,Object(l["h"])("td",null,Object(l["F"])(se.order.message),1)]),Object(l["h"])("tr",null,[ee,Object(l["h"])("td",null,Object(l["F"])(se.order.user.payment_method),1)])])]),Object(l["h"])("div",null,[Object(l["h"])("h6",{class:"pay_btn",onClick:e[12]||(e[12]=function(t){return oe.payOrder(),se.link="four"})},"確認付款")])],32)],2),Object(l["h"])("div",{class:["cart_setp_four",{active:"four"===se.link}]},[ce,Object(l["h"])(ie,{to:"/products/全部",class:"main_btn",onClick:oe.reset},{default:Object(l["N"])((function(){return[le,ne]})),_:1},8,["onClick"])],2)])])}c("99af");var se={data:function(){return{link:"first",cart:[],user:{email:"",name:"",phone:"",address:"",message:"",payment_method:""},isNotice:!0,coupon_code:"",coupon:{},order:{user:{}},orderId:""}},methods:{getCart:function(){this.$store.dispatch("getCart")},delCartItem:function(t){this.$store.dispatch("delCartItem",t)},delAllCartData:function(){this.$store.dispatch("dellAllCart")},upateCartItem:function(t,e){"add"===e?this.cart.qty=t.qty+1:"less"===e&&t.qty>1&&(this.cart.qty=t.qty-1);var c=t.id,l=this.cart.qty;this.$store.dispatch("upateCartItem",{product:c,qtys:l})},addCouponCode:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("johnhexschool","/coupon");this.$http.post(e,{data:{code:this.coupon_code}}).then((function(e){!0===e.data.success?(t.coupon=e.data.data,t.getCart(),t.$swal.fire({icon:"success",title:"已使用優惠劵",showConfirmButton:!1,timer:2e3})):(t.getCart(),t.$swal.fire({icon:"error",title:"優惠劵代碼錯誤",showConfirmButton:!1,timer:2e3}))})),this.couponCode=""},onSubmit:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("johnhexschool","/order");this.$http.post(e,{data:{user:{name:this.user.name,email:this.user.email,tel:this.user.phone,address:this.user.address,payment_method:this.user.payment_method},message:this.user.message}}).then((function(e){t.orderId=e.data.orderId,t.getOrder(),t.$refs.form.resetForm(),t.isLoading=!1,t.link="third",t.$swal.fire({icon:"success",title:"已完成訂單",showConfirmButton:!1,timer:2e3})}))},getOrder:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("johnhexschool","/order/").concat(this.orderId);this.isLoading=!0,this.$http.get(e).then((function(e){t.order=e.data.order,t.isLoading=!1}))},payOrder:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("johnhexschool","/pay/").concat(this.orderId);this.isLoading=!0,this.$http.post(e).then((function(e){e.data.success&&t.getOrder(),t.isLoading=!1}))},reset:function(){var t=this;setTimeout((function(){t.$router.go(0)}),500)}},created:function(){this.getCart()},computed:{carts:function(){return this.$store.state.carts},isLoading:function(){return this.$store.state.isLoading}},watch:{link:function(){this.coupon_code=""}}};c("01ea");se.render=ae;e["default"]=se},"857a":function(t,e,c){var l=c("1d80"),n=/"/g;t.exports=function(t,e,c,a){var s=String(l(t)),o="<"+e;return""!==c&&(o+=" "+c+'="'+String(a).replace(n,"&quot;")+'"'),o+">"+s+"</"+e+">"}},9911:function(t,e,c){"use strict";var l=c("23e7"),n=c("857a"),a=c("af03");l({target:"String",proto:!0,forced:a("link")},{link:function(t){return n(this,"a","href",t)}})},af03:function(t,e,c){var l=c("d039");t.exports=function(t){return l((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},dd0f:function(t,e,c){}}]);
//# sourceMappingURL=chunk-07690d27.598522b9.js.map